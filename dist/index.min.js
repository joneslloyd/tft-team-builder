(function(a){function b(a,b){const c=a.firstChild;c?a.insertBefore(b,c):a.appendChild(b)}function c(...a){console.error("Mobalytics TFT comps builder error",...a)}function d(a){return Object.assign(n,r,a)}function e(a,b,c){const d=document.createEvent("Event");c&&(d.data=c),d.initEvent(`mobalytics.tft.compsBuilder.${b}`,!0,!0),a.dispatchEvent(d)}function f(f){const j=d(f),{domain:n,language:o,tftSet:p,state:r}=j;if(q.iframe)return void c("Already rendered");if(!j.container)return void c("Invalid container",!j.container);const s=k.querySelector(j.container);if(!s)return void c("Unable to find container by selector",j.container);const t=k.getElementById(l);t&&c("Element with required id already exists",l);let u=k.getElementById(m);if(!u){u=k.createElement("style"),u.setAttribute("id",m),u.setAttribute("type","text/css");u.styleSheet?u.styleSheet.cssText=".moba-tft-comp-builder{width: 100%;min-height: 180px;padding: 0;margin: 0 auto;}":u.appendChild(k.createTextNode(".moba-tft-comp-builder{width: 100%;min-height: 180px;padding: 0;margin: 0 auto;}")),b(k.head,u)}const v=a.document.createElement("iframe");v.setAttribute("id",l),v.setAttribute("scrolling","no"),v.setAttribute("frameborder","0"),v.setAttribute("src",`${n}/${o}/tft/${p}/comp-builder-external?map=${r}`),v.classList.add("moba-tft-comp-builder"),v.onload=function(){q.isLoaded=!0,e(a.document,"loaded")},v.error=function(){q.isError=!0,e(a.document,"error",{code:h.LOADING_ERROR})},a.addEventListener("message",function(b){if(b&&b.data&&b.data.slug===g.EVENT){const d=b.data.event?b.data.event.type:null;switch(d){case i.RESIZE:v.style.height=`${b.data.event.data.height}px`,e(a.document,"resize",b.data.event.data);break;case i.STATE_CHANGED:e(a.document,"stateChanged",b.data.event.data);break;default:c("Unknown message",b.data);}}}),b(s,v),q.iframe=v}const g={EVENT:"moba-external-comp-builder-event",ACTION:"moba-external-comp-builder-action"},h={LOADING_ERROR:1},i={RESIZE:0,STATE_CHANGED:1},j={SET_STATE:0,SET_LANGUAGE:1},k=a.document,l="moba-tft-comp-builder",m="moba-tft-comp-builder-style",n={tftSet:"set2",language:"en_us",domain:"https://app.mobalytics.gg",state:""},o=a.mobalytics||{},p=o.tft||{},q=p.compBuilder||{},r=q.args[0];q.render=f,q.setState=function(a,b){if(q.iframe){const c={type:j.SET_STATE,data:{tftSet:a,state:b}};q.iframe.contentWindow.postMessage({slug:g.ACTION,action:c},"*")}else c("Unable to setLanguage, not rendered")},q.setLanguage=function(a){if(q.iframe){const b={type:j.SET_LANGUAGE,data:{language:a}};q.iframe.contentWindow.postMessage({slug:g.ACTION,action:b},"*")}else c("Unable to setLanguage, not rendered")},r.container&&f()})(window);