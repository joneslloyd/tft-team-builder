(function(a){function b(...a){console.error("Mobalytics TFT comps builder error",...a)}function c(a){return Object.assign(j,n,a)}function d(a,b,c){const d=document.createEvent("Event");c&&(d.data=c),d.initEvent(`mobalytics.tft.compsBuilder.${b}`,!0,!0),a.dispatchEvent(d)}function e(e){const i=c(e),{domain:j,language:k,tftSet:l,state:n}=i;if(m.iframe)return void b("Already rendered");if(!i.container)return void b("Invalid container",!i.container);const o=a.document.querySelector(i.container);if(!o)return void b("Unable to find container by selector",i.container);const p=a.document.createElement("iframe");p.setAttribute("id","moba-tft-comp-builder"),p.setAttribute("scrolling","no"),p.setAttribute("frameborder","0"),p.setAttribute("src",`${j}/${k}/tft/${l}/comp-builder-external?map=${n}`),p.classList.add("moba-tft-comp-builder"),p.onload=function(){m.isLoaded=!0,d(a.document,"loaded")},p.error=function(){m.isError=!0,d(a.document,"error",{code:g.LOADING_ERROR})},a.addEventListener("message",function(c){if(c&&c.data&&c.data.slug===f.EVENT){const e=c.data.event?c.data.event.type:null;switch(e){case h.RESIZE:p.style.height=`${c.data.event.data.height}px`,d(a.document,"resize",c.data.event.data);break;case h.STATE_CHANGED:d(a.document,"stateChanged",c.data.event.data);break;default:b("Unknown message",c.data);}}}),o.parentNode.appendChild(p),m.iframe=p}const f={EVENT:"moba-external-comp-builder-event",ACTION:"moba-external-comp-builder-action"},g={LOADING_ERROR:1},h={RESIZE:0,STATE_CHANGED:1},i={SET_STATE:0,SET_LANGUAGE:1},j={tftSet:"set2",language:"en_us",domain:"https://app.mobalytics.gg"},k=a.mobalytics||{},l=k.tft||{},m=l.compBuilder||{},n=m.args[0];m.render=e,m.setState=function(a,c){if(m.iframe){const b={type:i.SET_STATE,data:{tftSet:a,state:c}};m.iframe.style.height="",m.iframe.contentWindow.postMessage({slug:f.ACTION,action:b},"*")}else b("Unable to setLanguage, not rendered")},m.setLanguage=function(a){if(m.iframe){const b={type:i.SET_LANGUAGE,data:{language:a}};m.iframe.style.height="",m.iframe.contentWindow.postMessage({slug:f.ACTION,action:b},"*")}else b("Unable to setLanguage, not rendered")},n.container&&e()})(window);